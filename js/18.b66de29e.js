(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{"013f":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"box"},[t("br"),t("div",{staticClass:"row"},[t("div",{staticClass:"col-lg-12 col-md-12 col-sm-12 col-xs-12"},[t("form",{staticClass:"login q-pl-md q-pr-md",staticStyle:{"border-radius":"5px"},on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[t("div",{staticClass:"text-h5 text-center q-mb-sm"},[e._v("Resultados Online")]),t("q-input",{attrs:{outlined:"",rounded:"",type:"text",color:"teal",label:"Usuário",rules:[function(e){return e&&e.length>0||"Campo Obrigatório"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"person"}})]},proxy:!0}]),model:{value:e.credenciais.usuario,callback:function(t){e.$set(e.credenciais,"usuario",t)},expression:"credenciais.usuario"}}),t("q-input",{attrs:{outlined:"",rounded:"",color:"teal",type:e.isPwd?"password":"text",label:"Senha",rules:[function(e){return e&&e.length>0||"Campo Obrigatório"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"lock"}})]},proxy:!0},{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.isPwd?"visibility_off":"visibility"},on:{click:function(t){e.isPwd=!e.isPwd}}})]},proxy:!0}]),model:{value:e.credenciais.senha,callback:function(t){e.$set(e.credenciais,"senha",t)},expression:"credenciais.senha"}}),t("div",{staticClass:"q-gutter-xs-x-xs q-mb-sm"},e._l(e.dadosTipo,(function(i,a){return t("q-radio",{key:a,staticClass:"q-mr-xs",staticStyle:{"font-size":"0.7rem"},attrs:{dense:"",color:"teal",val:i.value,label:i.label},model:{value:e.tipoLogin,callback:function(t){e.tipoLogin=t},expression:"tipoLogin"}})})),1),t("q-btn",{staticClass:"full-width",attrs:{padding:"sm","no-caps":"",rounded:"",unelevated:"",color:"teal",label:"Login",type:"submit"}}),"cliente"!==e.tipoLogin||e.$q.platform.is.desktop?e._e():t("q-btn",{staticClass:"full-width q-mt-sm",attrs:{padding:"sm","no-caps":"",rounded:"",icon:"qr_code_scanner",unelevated:"",label:"Login QrCode",to:"/loginqr"}})],1)])]),t("q-dialog",{attrs:{persistent:"",maximized:e.maximizedToggle,"transition-show":"none","transition-hide":"none"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("q-card",[t("q-bar",[t("div",{staticClass:"col text-center text-weight-bold",staticStyle:{color:"white"}},[t("q-icon",{staticClass:"q-mr-xs",attrs:{name:"person_outline",size:"sm"}}),e._v(e._s(e.usuario)+"\n                    ")],1),t("q-space"),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticStyle:{color:"white"},attrs:{dense:"",flat:"",icon:"close"}},[t("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Fechar")])],1)],1),t("q-card-section",{staticClass:"q-pt-none",staticStyle:{padding:"0 !important",margin:"0 !important"}},[t("laudos")],1)],1)],1),t("q-dialog",{attrs:{persistent:"",maximized:e.maximizedToggle,"transition-show":"none","transition-hide":"none"},model:{value:e.dlgPesquisa,callback:function(t){e.dlgPesquisa=t},expression:"dlgPesquisa"}},[t("q-card",[t("q-bar",[t("div",{staticClass:"col text-center text-weight-bold",staticStyle:{color:"white"}},[t("q-icon",{staticClass:"q-mr-xs",attrs:{name:"person_outline",size:"sm"}}),e._v(e._s(e.usuario)+"\n                    ")],1),t("q-space"),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticStyle:{color:"white"},attrs:{dense:"",flat:"",icon:"close"}},[t("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Fechar")])],1)],1),t("q-card-section",{staticClass:"q-pt-none",staticStyle:{padding:"0 !important",margin:"0 !important"}},[t("PesquisaSatisfacao",{attrs:{idPaciente:e.idPcte},on:{pesquisa:e.getRespondeu}})],1)],1)],1),t("rodape")],1)])},o=[],s=(i("99af"),i("d3b7"),i("e6cf"),i("a79d"),i("96cf"),i("c973")),n=i.n(s),c=i("bd4c"),l=i("bc3a"),r=i.n(l),u=i("73ef"),d=i("3b60"),p=i.n(d),g=i("c571"),m=i("6220"),f=i("5cc5"),q=i("16b6"),v=i("d017"),h={name:"Login",components:{rodape:g["a"],resultados:m["default"],laudos:f["a"],PesquisaSatisfacao:q["default"]},data:function(){return{isPwd:!0,idPcte:"",ultimaPesquisaRespondida:"",usuario:null,dadosTipo:null,tipoLogin:"cliente",dialog:!1,dlgPesquisa:!1,maximizedToggle:!0,credenciais:{usuario:"",senha:""}}},watch:{tipoLogin:function(e){localStorage.removeItem("tipoLogin"),localStorage.setItem("tipoLogin",e)}},beforeCreate:function(){localStorage.removeItem("token"),localStorage.setItem("tipoLogin","cliente")},mounted:function(){this.tipoPesquisa()},methods:{getRespondeu:function(e){e&&(this.dlgPesquisa=!1,this.dialog=!0)},getPesquisa:function(){var e=this;return n()(regeneratorRuntime.mark((function t(){var i,a,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.idPcte=e.credenciais.usuario,t.next=3,r.a.get("".concat(u["a"],"/biovel/qualidade/questionario_ativo/").concat(e.idPcte)).then((function(t){e.ultimaPesquisaRespondida=t.data.ultima_pesquisa_respondida})).catch((function(e){return console.error(e)}));case 3:e.ultimaPesquisaRespondida?(i=new Date,a=e.ultimaPesquisaRespondida,o="days",s=c["b"].getDateDiff(i,a,o),s>30?e.dlgPesquisa=!0:(e.dialog=!0,e.dlgPesquisa=!1)):(e.dialog=!1,e.dlgPesquisa=!0);case 4:case"end":return t.stop()}}),t)})))()},getUsuario:function(){this.getPesquisa(),this.usuario=localStorage.getItem("usuario")},tipoPesquisa:function(){this.dadosTipo=[{label:"Paciente",value:"cliente",color:"teal"},{label:"Convênio",value:"convenio",color:"teal"},{label:"Médico",value:"medico",color:"teal"},{label:"Clínica",value:"clinica",color:"teal"},{label:"Unidade",value:"unidade",color:"teal"}]},login:function(){var e=this,t="";t=this.credenciais.usuario;var i="";i=p()(this.credenciais.senha);var a="";a=this.tipoLogin,""!==t&&""!=i?this.$store.dispatch(v["c"],{usuario:t,senha:i,tipoLogin:a}).then((function(){"cliente"===e.tipoLogin?e.getUsuario():e.dialog=!0})).catch((function(t){e.$q.notify({position:"top",type:"negative",color:"red",message:"Atenção! Credenciais inválidas. "})})).finally((function(){})):this.$q.notify({position:"top",type:"warning",color:"orange",message:"Atenção! Informe suas credenciais. "})}}},b=h,x=(i("318c"),i("2877")),w=i("27f9"),P=i("0016"),y=i("3786"),C=i("9c40"),_=i("24e8"),S=i("f09f"),k=i("d847"),L=i("2c91"),Q=i("05c0"),R=i("a370"),z=i("7f67"),I=i("eebe"),T=i.n(I),$=Object(x["a"])(b,a,o,!1,null,null,null);t["default"]=$.exports;T()($,"components",{QInput:w["a"],QIcon:P["a"],QRadio:y["a"],QBtn:C["a"],QDialog:_["a"],QCard:S["a"],QBar:k["a"],QSpace:L["a"],QTooltip:Q["a"],QCardSection:R["a"]}),T()($,"directives",{ClosePopup:z["a"]})},2759:function(e,t,i){},"318c":function(e,t,i){"use strict";i("2759")}}]);