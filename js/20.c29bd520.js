(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{"64ca":function(e,t,o){},"67fb":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[t("q-dialog",{attrs:{persistent:"",maximized:e.maximizedToggle,"transition-show":"none","transition-hide":"none","full-height":""},on:{"before-hide":function(t){return e.closeDialog()}},model:{value:e.dialogQr,callback:function(t){e.dialogQr=t},expression:"dialogQr"}},[t("q-card",{staticStyle:{overflow:"hidden"}},[t("q-bar",[t("div",{staticClass:"col text-center text-weight-bold",staticStyle:{color:"white"}},[t("q-icon",{staticClass:"q-mr-xs",attrs:{name:"qr_code_scanner",size:"sm"}}),e._v(" Login QrCode\n                ")],1),t("q-space"),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticStyle:{color:"white"},attrs:{dense:"",flat:"",icon:"close"}},[t("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Fechar")])],1)],1),t("q-card-section",{staticClass:"q-pa-none q-ma-none full-width full-height"},[e.error?t("q-banner",{staticClass:"text-white bg-red",scopedSlots:e._u([{key:"avatar",fn:function(){return[t("q-icon",{attrs:{name:"videocam_off",color:"white"}})]},proxy:!0},{key:"action",fn:function(){return[t("q-btn",{attrs:{flat:"",color:"white",label:"Sair"},on:{click:function(t){e.dialogQr=!1}}})]},proxy:!0}],null,!1,713188025)},[e._v("\n                    "+e._s(e.error)+"\n                    ")]):e._e(),t("qrcode-stream",{key:e._uid,attrs:{track:this.paintOutline},on:{init:e.onInit,decode:e.onDecode}})],1)],1)],1),t("q-dialog",{attrs:{persistent:"",maximized:e.maximizedToggle,"transition-show":"none","transition-hide":"none"},on:{"before-hide":function(t){return e.closeDialog()}},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("q-card",[t("q-bar",[t("div",{staticClass:"col text-center text-weight-bold",staticStyle:{color:"white"}},[t("q-icon",{staticClass:"q-mr-xs",attrs:{name:"person_outline",size:"sm"}}),e._v(e._s(e.usuario)+"\n                ")],1),t("q-space"),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticStyle:{color:"white"},attrs:{dense:"",flat:"",icon:"close"}},[t("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Fechar")])],1)],1),t("q-card-section",{staticClass:"q-pt-none",staticStyle:{padding:"0 !important",margin:"0 !important"}},[t("laudos")],1)],1)],1)],1)},r=[],n=(o("99af"),o("fb6a"),o("b0c0"),o("480f")),i=o.n(n),c=o("6374"),s=o.n(c),l=(o("96cf"),o("c973")),u=o.n(l),d=o("bc3a"),m=o.n(d),p=o("f508"),f=o("bb6f"),g=o("73ef"),h=o("5cc5"),v={components:{QrcodeStream:f["QrcodeStream"],QrcodeDropZone:f["QrcodeDropZone"],QrcodeCapture:f["QrcodeCapture"],laudos:h["a"]},data:function(){return{result:"",error:"",tipoLogin:"cliente",dialog:!1,dialogQr:!0,maximizedToggle:!0,usuario:"",authQr:!1}},methods:{getUsuario:function(){this.usuario=localStorage.getItem("usuario"),usuario&&(this.dialog=!0)},closeDialog:function(){this.$router.push("/login")},onInit:function(e){var t=this;return u()(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return p["a"].show(),o.prev=1,o.next=4,e;case 4:o.next=12;break;case 6:o.prev=6,o.t0=o["catch"](1),p["a"].hide(),console.error(o.t0),"NotAllowedError"===o.t0.name?t.error="Permissão de acesso à câmera negada pelo usuário.":"NotFoundError"===o.t0.name?t.error="Nenhum dispositivo de câmera adequado instalado.":"NotSupportedError"===o.t0.name?t.error="A página não é segura.":"NotReadableError"===o.t0.name?t.error="Talvez a câmera já esteja em uso.":"OverconstrainedError"===o.t0.name?t.error="você solicitou a câmera frontal, embora não haja nenhuma?":"StreamApiNotSupportedError"===o.t0.name&&(t.error="navegador parece estar sem recursos"),t.setTimeout((function(){t.dialogQr=!1}),3e3);case 12:return o.prev=12,p["a"].hide(),o.finish(12);case 15:case"end":return o.stop()}}),o,null,[[1,6,12,15]])})))()},onDecode:function(e){this.qrCode=e,this.qrCode&&this.login2()},reload:function(){var e=this;return u()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.destroyed=!0,t.next=3,e.$nextTick();case 3:e.destroyed=!1;case 4:case"end":return t.stop()}}),t)})))()},resetLocalStorage:function(){localStorage.removeItem("token"),localStorage.removeItem("usuario"),localStorage.removeItem("id"),localStorage.removeItem("tipo"),localStorage.removeItem("auth"),localStorage.removeItem("perfil")},paintOutline:function(e,t){var o,a=s()(e);try{for(a.s();!(o=a.n()).done;){var r=o.value,n=i()(r.cornerPoints),c=n[0],l=n.slice(1);t.strokeStyle="red",t.beginPath(),t.moveTo(c.x,c.y);var u,d=s()(l);try{for(d.s();!(u=d.n()).done;){var m=u.value,p=m.x,f=m.y;t.lineTo(p,f)}}catch(g){d.e(g)}finally{d.f()}t.lineTo(c.x,c.y),t.closePath(),t.stroke()}}catch(g){a.e(g)}finally{a.f()}},login2:function(){var e=this,t={qr:this.qrCode};m.a.post("".concat(g["a"],"/mobileapp/login/").concat(this.tipoLogin),t).then((function(t){e.usuario=t.data.nome;var o=t.data.AuthToken;localStorage.setItem("token",o),localStorage.setItem("usuario",t.data.nome),localStorage.setItem("id",t.data.id),localStorage.setItem("tipo",e.tipoLogin),localStorage.setItem("auth",JSON.stringify(t.data)),m.a.defaults.headers.common["Authorization"]="Bearer "+o,m.a.defaults.headers.common["Content-Type"]="application/json",m.a.defaults.headers.common["Access-Control-Allow-Credentials"]="true",setTimeout((function(){try{e.dialog=!0}catch(t){}}),500)})).catch((function(t){console.error(t),notifyAlert("negative","Atenção! Credenciais inválidas."),setTimeout((function(){e.dialogQr=!1}),500),e.resetLocalStorage()}))}}},w=v,b=(o("7c4c"),o("2877")),q=o("24e8"),S=o("f09f"),x=o("d847"),y=o("0016"),Q=o("2c91"),C=o("9c40"),k=o("05c0"),_=o("a370"),I=o("54e1"),T=o("7f67"),z=o("eebe"),A=o.n(z),N=Object(b["a"])(w,a,r,!1,null,"5cd9f62e",null);t["default"]=N.exports;A()(N,"components",{QDialog:q["a"],QCard:S["a"],QBar:x["a"],QIcon:y["a"],QSpace:Q["a"],QBtn:C["a"],QTooltip:k["a"],QCardSection:_["a"],QBanner:I["a"]}),A()(N,"directives",{ClosePopup:T["a"]})},"7c4c":function(e,t,o){"use strict";o("64ca")}}]);